<link rel="import"  href="/bower_components/polymer/polymer-element.html">

<dom-module id="x-player">

  <template>
    <p>{{medium_url}}</p>
  </template>

  <script>
    class XPlayer extends Polymer.Element {
      static get is() { return "x-player"; }
      constructor() {
        super();
      }

      ready() {
        super.ready();
        console.log("id: "+this.id);
        console.log("src: "+this.src);


        const mediumInstance = document.getElementById(this.src);

        mediumInstance.addEventListener("select",({detail:{medium}}) => {

          this.medium_url=mediumInstance.client.getMediumURL(medium,'mp4');
        });
      }

      static get properties() {
        return {
          src: {
            type: String
          },
          id: {
            type: String
          }
        };
      }
    }
    customElements.define(XPlayer.is, XPlayer);
  </script>

</dom-module>