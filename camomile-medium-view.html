<link rel="import" href="node_modules/@polymer/polymer/polymer-element.html">

<dom-module id="camomile-medium-view">

  <template>
  </template>

  <script>
    class CamomileMediumView extends Polymer.Element {
      static get is() {
        return "camomile-medium-view";
      }

      constructor() {
        super();
      }

      ready() {
        super.ready();

        const mediumInstance = document.getElementById(this.srcMedium);

        mediumInstance.addEventListener("select", ({detail: {medium}}) => {
          this.medium=medium;
          this.client=mediumInstance.client;
          this.medium_url = this.client.getMediumURL(medium, 'webm');
          this.dispatchEvent(new CustomEvent('ready', {}));
        });

        mediumInstance.addEventListener("deselect", () => {
          this.medium=null;
          this.medium_url="";
          this.client=null;
          this.dispatchEvent(new CustomEvent('reset', {}));
        });
      }

      static get properties() {
        return {
          srcMedium: String,
          id: String
        };
      }
    }
    customElements.define(CamomileMediumView.is, CamomileMediumView);
  </script>

</dom-module>